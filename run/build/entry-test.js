const fs = require('fs');
const path = require('path');
const uppercamelcase = require('uppercamelcase');
const Components = require('./get-libs')();

module.exports = function genEntry() {
  const importList = Components.map(name => {
      const f = `libs/${uppercamelcase(name)}/test`;

      return fs.existsSync(path.resolve(process.cwd(), f)) ? `import '../${f}'` : ''
  });
  const content = `/* auto generated by npm test*/
${importList.join('\n')}
`;
  fs.writeFileSync(path.join(process.cwd(), 'test/index.js'), content);
}

